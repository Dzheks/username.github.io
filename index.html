<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>NovaShop</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body style="margin:0;font-family:Arial;background:#0f0f0f;color:white">

<div style="padding:16px">
  <h2>üõç NovaShop</h2>

  <div id="catalog"></div>

  <button onclick="openCart()" style="margin-top:20px;padding:14px;width:100%;border:none;border-radius:12px;background:#00c853;color:white;font-size:16px">
    üõí –ö–æ—Ä–∑–∏–Ω–∞
  </button>
</div>

<script>
const tg = window.Telegram.WebApp;
tg.expand();

const products = [
  { id: 1, name: "PS Plus Essential", price: 2500 },
  { id: 2, name: "PS Plus Extra", price: 3500 },
  { id: 3, name: "PS Plus Deluxe", price: 4500 },
  { id: 4, name: "Steam Wallet 1000‚ÇΩ", price: 1000 },
  { id: 5, name: "Steam Wallet 3000‚ÇΩ", price: 3000 },
  { id: 6, name: "Xbox Game Pass", price: 2000 }
];

let cart = [];

const catalog = document.getElementById("catalog");

products.forEach(p => {
  const card = document.createElement("div");
  card.style = "background:#1c1c1c;border-radius:12px;padding:16px;margin-bottom:16px";

  card.innerHTML = `
    <h3>${p.name}</h3>
    <b>${p.price} ‚ÇΩ</b><br><br>
    <button style="padding:12px;width:100%;border:none;border-radius:10px;background:#2979ff;color:white"
      onclick="addToCart(${p.id})">
      –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É
    </button>
  `;

  catalog.appendChild(card);
});

function addToCart(id) {
  const product = products.find(p => p.id === id);
  cart.push(product);
  tg.showAlert(product.name + " –¥–æ–±–∞–≤–ª–µ–Ω");
}

function openCart() {
  if (cart.length === 0) {
    tg.showAlert("–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞—è");
    return;
  }

  let text = "";
  let total = 0;

  cart.forEach(i => {
    text += "‚Ä¢ " + i.name + " ‚Äî " + i.price + " ‚ÇΩ\n";
    total += i.price;
  });

  text += "\n–ò—Ç–æ–≥–æ: " + total + " ‚ÇΩ";

  tg.showPopup({
    title: "–ö–æ—Ä–∑–∏–Ω–∞",
    message: text,
    buttons: [{ type: "ok", text: "–ó–∞–∫—Ä—ã—Ç—å" }]
  });
}
</script>

</body>
</html>
